# Gives the player a saplink with the proper data

advancement grant @s only tcc:minecraft/adventure/create_saplink

$execute if data storage tcc:temp root.name if data entity @s[predicate=!tcc:entity_properties/full_inventory] SelectedItem run return run loot give @s loot {"pools":[{rolls:1,entries:[{"type":"minecraft:loot_table","value":"tcc:technical/saplink/named",functions:[{"function":"minecraft:set_name","name":{"translate":"item.tcc.saplink.$(sapling_id)"},"target":"item_name"},{"function":"minecraft:set_custom_model_data",strings:{mode:"replace_all",values:["$(sapling_id)"]}}]}]}]}
$execute unless data storage tcc:temp root.name if data entity @s[predicate=!tcc:entity_properties/full_inventory] SelectedItem run return run loot give @s loot {"pools":[{rolls:1,entries:[{"type":"minecraft:loot_table","value":"tcc:technical/saplink/unnamed",functions:[{"function":"minecraft:set_name","name":{"translate":"item.tcc.saplink.$(sapling_id)"},"target":"item_name"},{"function":"minecraft:set_custom_model_data",strings:{mode:"replace_all",values:["$(sapling_id)"]}}]}]}]}
$execute if data storage tcc:temp root.name if data entity @s[predicate=tcc:entity_properties/full_inventory] SelectedItem run return run loot spawn ~ ~ ~ loot {"pools":[{rolls:1,entries:[{"type":"minecraft:loot_table","value":"tcc:technical/saplink/named",functions:[{"function":"minecraft:set_name","name":{"translate":"item.tcc.saplink.$(sapling_id)"},"target":"item_name"},{"function":"minecraft:set_custom_model_data",strings:{mode:"replace_all",values:["$(sapling_id)"]}}]}]}]}
$execute unless data storage tcc:temp root.name if data entity @s[predicate=tcc:entity_properties/full_inventory] SelectedItem run return run loot spawn ~ ~ ~ loot {"pools":[{rolls:1,entries:[{"type":"minecraft:loot_table","value":"tcc:technical/saplink/unnamed",functions:[{"function":"minecraft:set_name","name":{"translate":"item.tcc.saplink.$(sapling_id)"},"target":"item_name"},{"function":"minecraft:set_custom_model_data",strings:{mode:"replace_all",values:["$(sapling_id)"]}}]}]}]}
$execute if data storage tcc:temp root.name unless data entity @s SelectedItem run return run loot replace entity @s weapon.mainhand loot {"pools":[{rolls:1,entries:[{"type":"minecraft:loot_table","value":"tcc:technical/saplink/named",functions:[{"function":"minecraft:set_name","name":{"translate":"item.tcc.saplink.$(sapling_id)"},"target":"item_name"},{"function":"minecraft:set_custom_model_data",strings:{mode:"replace_all",values:["$(sapling_id)"]}}]}]}]}
$execute unless data storage tcc:temp root.name unless data entity @s SelectedItem run return run loot replace entity @s weapon.mainhand loot {"pools":[{rolls:1,entries:[{"type":"minecraft:loot_table","value":"tcc:technical/saplink/unnamed",functions:[{"function":"minecraft:set_name","name":{"translate":"item.tcc.saplink.$(sapling_id)"},"target":"item_name"},{"function":"minecraft:set_custom_model_data",strings:{mode:"replace_all",values:["$(sapling_id)"]}}]}]}]}
